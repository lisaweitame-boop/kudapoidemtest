<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="theme-color" content="#1f2937">
    <title>–ö—É–¥–∞–ü–æ–π–¥–µ–º</title>
    <script type="text/javascript" src="https://gc.kis.v2.scr.kaspersky-labs.com/FD126C42-EBFA-4E12-B309-BB3FDD723AC1/main.js?attr=tAYfAopkAZfzJRBZXVOV0GrqmOmcigCiIb9nBysm-Pj33Fs26TE2mqG_kdMmHeCg4stFuGkgch9aP97X-xqZu-u40gfFwQuoMEA1j7aDSgfmqfAPvZvNbfYzgHyIdL6WSBMc7HnorTbUimXgpvHgh8eupQAn_9-XJIoU3M-iMvpIaDhWh0ntBWBKw0Rt0cwt_L0dcSK532YN_BKXSRhuP88A9DINHkNtu8ykb7iXOSH3hB6K_YB793_jBOiNoYAkVxicUkfrFvyHelqGsmvjojVaNc0wLseLnePZzbHzXOqCdBMzDKu1MTwxQNnCfEpntDiYnKps-c0keXSzjjUzA0qSweB1WXJNuY2-99-DsTL9qBHUIbe9w_WSMNTCY503BhxJHVFbTX5KfH1m71m9pI8rLU4J8_US3q_S-N5b2dtyLhxTA2fOC0mlX6SPdrY-gWlvMog4ttSNoBsGJtiM2myXy4GB2I_63aUDOZKcgk5MFH3ixLSnkY9FOMt3drAeV3UnR24BuN2Ha9PeNen2lScdJzCH1J9nlvp_-bsLpvtgFH8wp5Yna5ykwtTcmLnBGlmCzQHi422hvMXr6-SS-Van0jf7_8L3ZTqX1mmmet21tDUQUrJ86kDBRR4P_sfWKBQJla2yMxr6vk3e3smh-OYrqeZOIYj3tlCuH2esV3YVQmseZT30SK9vLQPWWNJOFiPBJgkTN9GkNASgbZfw74a4z5c5hg1dH3ri6zvehLaIc5WUWW7ojlMVvW2QNe5nxi4ZdKMQ2coDIrJLkL5GDF_FEa1FDZVaOTh7tE2pNeGceDmsGm9oEtBbe2coNNlW2FaNQ5VNQ39so71OK2jMJ9XFTIqN8ZVN37QFzS_PuAgavO7rbR0Iw8vVmsqy2U1Bzr11CxBxJT7laWZeoai8a41Av2b9ezZ4OaVWSvh6akgM7cOnrzGZE9kFSN9QkJFllaoYpZ3F1bwNYDO7FIzUr6T9-NF98RefHu_iwRtl5kY0WKYdg5AY0X5Qy2diKGEj7QiSZQFl-_EqCznuvAuP04kjNlM_ww4F7HuL4GeZ9whIPEXVBc6c_ziWIO6sSdEOZQCIF6r-IGwkWbTDozdRmCh4ic8MX-aslLUr1pAB0BHHKXsX1ekoL3GR9ho0nwmBj5tHT_sACCXgKmplR0xIAERxoIZ7HELer3Y6Wa2awE1Oy_UzBG4ODGZSbktE6BmsCAAc7Q6zmuGILsaxlbAmTTto2O6_jVtkhoNf8SnHQYQ2Bbk1Mri3KJCpzyw1oWuFJ05OyFHCP0mJoePD1aSsuO9J9BWHundSgKsyV76noNjRyKkRTXhG9uhhBS9dLgGbtMBlQmbeYIm0n27Xo9DNIZkNPo9Ir2tleezuHE6WIdEogICG3vidWRfI18pINUR8bg3gL7fzQsFqGUV-o10sOs0g7tkGMZs63zHO6pbxUqa3TXZHmwkFWtScI8GRgkwECkl2j6-0ZCF07fuYUSFAi7e0Jm4OugxcEdCgkeZZOp1OzYEHrMTtSZPgf9cQqASEpQyTXd_2lopL7s2macWGAiHAZRSOdQGnW2bFIH6ZiP2u1jpuMxejYbczgLo_JFM1kTZXtpOPjzx66X4SKQN_PQMcQoqgnqyRBTCBj9DUvp6ggMbVuIf4-eChNNQVq82GMRQccZ_XcutIX6XIkWzvIk5VwUUEJUvxkIbNeiMnGiixoiclkasmd1PBTPO5bt3g9ccYbNR1KInt_KVKapR-y7uUnzPDAHfmxyRTwoaSYaGMzZLAjGsO-DGXWccFw_8awh0y7dpB0bogvhD77knxrxYFA27K4Q320DaSuTyPqTduqn-ICwXbCZIw4P2TQx6-sxLvvZ7BJIYK56R-1T37Ann1YoSLGmUpD_VYX6JuHw1u0n07oiiR4NSDwYzTLN1D5aGMzphFJt0skDpTDWWhiSFMCgKdyTAuwE_SfLJc0FOJsBn2aBC-_NxUQW9Nf2sKIfDtr_IAJrRsOEq_YMSzxGdPgXqX7c1oxIOOcgJ0AlF8a3Inu0Q0dWzqG30H8xNvl_5qn3m1z1QiX5JleV_FfEdsj5ALeyf3-Y84ncJD4Bj2abx-6d8Kp_MAJK_h9xUKNfWoWwL4nqqEAk_I6OcdIOV--Ovtbo-asMIjOkNSARzjpa81kvv4N09o_ocPSPJ475DVLv0evyFdoU_ZlkFouE-2M4mB-Adwy6vnYLn1HwLqUcuvVqHl_p5ZMhltPXCbtzJMWFFYh0vC4bRdCduEbxewI_xuTi-FrI6RuOxRPjpE_a35XqLvJdKCIF0AKhWgRPGyMA2OfxGwPuwoH2uKL5AjulYl-7X7qvkM1YUhL9QMMuZmXwm4xi6JL5NZPE_S_yzJ32JEv7zW37IIuvsBdg" charset="UTF-8"></script><script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
        }

        :root {
            --safe-area-top: env(safe-area-inset-top);
            --safe-area-bottom: env(safe-area-inset-bottom);
            --safe-area-left: env(safe-area-inset-left);
            --safe-area-right: env(safe-area-inset-right);
        }

        html, body {
            width: 100%;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', sans-serif;
            background: #f8f9fa;
            color: #1a1a1a;
            overflow: hidden;
        }

        body {
            display: flex;
            flex-direction: column;
            padding-top: var(--safe-area-top);
            padding-bottom: var(--safe-area-bottom);
            padding-left: var(--safe-area-left);
            padding-right: var(--safe-area-right);
        }

        /* Main Screen Container */
        .screen {
            display: none;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            animation: fadeIn 0.3s ease-in;
            flex-direction: column;
        }

        .screen.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Home Screen */
        #home {
            padding: 16px;
            gap: 16px;
            padding-bottom: 20px;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
        }

        .header h1 {
            font-size: 26px;
            font-weight: 700;
            color: #ffffff;
        }

        .subtitle {
            text-align: center;
            font-size: 13px;
            color: #999;
            margin-bottom: 16px;
        }

        .section {
            background: #ffffff;
            border-radius: 12px;
            padding: 14px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border: 1px solid #e8e8e8;
        }

        .section-title {
            font-size: 11px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .city-selector {
            width: 100%;
            background: #f0f4f8;
            border-radius: 8px;
            padding: 11px;
            font-size: 15px;
            color: #1a1a1a;
            border: 1.5px solid #0088cc;
            cursor: pointer;
            transition: all 0.2s;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            font-weight: 500;
        }

        .city-selector:active {
            background: #e6f2ff;
            border-color: #0066aa;
        }

        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin-bottom: 10px;
        }

        .btn-option {
            background: #f0f4f8;
            border: 1.5px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            font-size: 12px;
            color: #1a1a1a;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-weight: 500;
        }

        .btn-option:active {
            background: #0088cc;
            border-color: #0088cc;
            color: #ffffff;
            transform: scale(0.98);
        }

        .btn-option.active {
            background: #0088cc;
            border-color: #0088cc;
            color: #ffffff;
            box-shadow: 0 4px 12px rgba(0, 136, 204, 0.3);
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        .slider {
            flex: 1;
            height: 5px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #0088cc;
            cursor: pointer;
            transition: all 0.2s;
        }

        .slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #0088cc;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }

        .slider-value {
            min-width: 60px;
            text-align: right;
            font-size: 13px;
            color: #0088cc;
            font-weight: 700;
        }

        .mood-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
        }

        .mood-btn {
            background: #f0f4f8;
            border: 1.5px solid #ddd;
            border-radius: 8px;
            padding: 10px 6px;
            font-size: 11px;
            color: #1a1a1a;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-weight: 500;
            line-height: 1.3;
        }

        .mood-btn:active {
            background: #0088cc;
            border-color: #0088cc;
            color: #ffffff;
            transform: scale(0.98);
        }

        .mood-btn.active {
            background: #0088cc;
            border-color: #0088cc;
            color: #ffffff;
            box-shadow: 0 4px 12px rgba(0, 136, 204, 0.3);
        }

        .btn-primary {
            width: 100%;
            background: linear-gradient(135deg, #0088cc 0%, #0066aa 100%);
            border: none;
            border-radius: 10px;
            padding: 13px;
            font-size: 15px;
            font-weight: 600;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 16px;
            box-shadow: 0 4px 15px rgba(0, 136, 204, 0.35);
        }

        .btn-primary:active {
            opacity: 0.9;
            transform: scale(0.98);
            box-shadow: 0 2px 10px rgba(0, 136, 204, 0.25);
        }

        .btn-secondary {
            padding: 10px 14px;
            background: #f0f4f8;
            border: 1.5px solid #0088cc;
            color: #0088cc;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
        }

        .btn-secondary:active {
            background: #e6f2ff;
            border-color: #0066aa;
            transform: scale(0.98);
        }

        /* Loading Screen */
        #loading {
            align-items: center;
            justify-content: center;
            gap: 20px;
            padding: 20px;
        }

        .progress-steps {
            width: 100%;
            padding: 16px 0;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 0;
            font-size: 13px;
            color: #888;
        }

        .step.active {
            color: #0088cc;
        }

        .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid #3a3a3a;
            border-top-color: #0088cc;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            flex-shrink: 0;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .timer {
            font-size: 48px;
            font-weight: 700;
            color: #0088cc;
            text-align: center;
            font-family: 'Courier New', monospace;
        }

        .cancel-btn {
            width: 100%;
            padding: 11px;
            background: #f0f4f8;
            border: 1.5px solid #ddd;
            color: #1a1a1a;
            border-radius: 8px;
            font-size: 13px;
            cursor: pointer;
            margin-top: 16px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .cancel-btn:active {
            background: #e8e8e8;
            border-color: #999;
        }

        /* Route Screen */
        #route {
            padding: 0;
        }

        .route-header {
            background: linear-gradient(135deg, #ffffff 0%, #f5f9fc 100%);
            padding: 14px;
            border-bottom: 1px solid #e8e8e8;
            flex-shrink: 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .route-title {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 6px;
            color: #1a1a1a;
        }

        .route-meta {
            font-size: 12px;
            color: #666;
            font-weight: 500;
        }

        .route-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .route-item {
            background: #ffffff;
            border-radius: 10px;
            padding: 11px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #e8e8e8;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
        }

        .route-item:active {
            background: #f5f9fc;
            border-color: #0088cc;
            transform: scale(0.98);
            box-shadow: 0 4px 12px rgba(0, 136, 204, 0.2);
        }

        .route-item-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #0088cc 0%, #0066aa 100%);
            color: #ffffff;
            border-radius: 50%;
            font-weight: 700;
            font-size: 11px;
            margin-right: 9px;
            box-shadow: 0 2px 6px rgba(0, 136, 204, 0.3);
            flex-shrink: 0;
        }

        .route-item-name {
            font-size: 13px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 6px;
            color: #1a1a1a;
        }

        .route-item-time {
            font-size: 12px;
            color: #666;
            margin: 4px 0 0 33px;
            font-weight: 500;
        }

        .route-footer {
            background: #ffffff;
            border-top: 1px solid #e8e8e8;
            padding: 10px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            flex-shrink: 0;
        }

        .btn-small {
            padding: 9px;
            background: #f0f4f8;
            border: 1.5px solid #ddd;
            color: #0088cc;
            border-radius: 6px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
        }

        .btn-small:active {
            background: #0088cc;
            color: #ffffff;
            border-color: #0088cc;
            transform: scale(0.95);
            box-shadow: 0 2px 6px rgba(0, 136, 204, 0.2);
        }

        /* Detail Screen */
        #detail {
            padding: 14px;
        }

        .detail-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 14px;
            gap: 10px;
        }

        .detail-title {
            font-size: 16px;
            font-weight: 700;
            flex: 1;
        }

        .detail-card {
            background: #252525;
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 10px;
            border: 1px solid #3a3a3a;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 7px 0;
            font-size: 13px;
        }

        .detail-label {
            color: #888;
        }

        .detail-value {
            font-weight: 600;
            color: #ffffff;
        }

        .detail-review {
            background: #f0f4f8;
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
            border-left: 3px solid #0088cc;
        }

        .review-text {
            font-size: 12px;
            font-style: italic;
            color: #1a1a1a;
            margin-bottom: 6px;
            line-height: 1.4;
        }

        .review-author {
            font-size: 11px;
            color: #666;
            font-weight: 500;
        }

        .detail-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 12px;
        }

        /* Navigation Screen */
        #nav {
            padding: 14px;
        }

        .nav-instruction {
            background: #0088cc;
            color: #ffffff;
            padding: 14px;
            border-radius: 10px;
            margin-bottom: 14px;
            text-align: center;
            font-weight: 600;
            font-size: 14px;
        }

        .nav-distance {
            background: #252525;
            border-radius: 10px;
            padding: 14px;
            margin-bottom: 14px;
            border: 1px solid #3a3a3a;
        }

        .nav-action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin-top: 14px;
        }

        .nav-btn {
            padding: 10px 6px;
            background: #f0f4f8;
            border: 1.5px solid #ddd;
            color: #0088cc;
            border-radius: 6px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-weight: 600;
        }

        .nav-btn:active {
            background: #0088cc;
            color: #ffffff;
            border-color: #0088cc;
            transform: scale(0.98);
            box-shadow: 0 2px 6px rgba(0, 136, 204, 0.2);
        }

        /* History Screen */
        #history {
            padding: 14px;
        }

        .history-item {
            background: #252525;
            border-radius: 10px;
            padding: 11px;
            margin-bottom: 8px;
            border: 1px solid #3a3a3a;
            cursor: pointer;
            transition: all 0.2s;
        }

        .history-item:active {
            background: #2f2f2f;
            border-color: #0088cc;
        }

        .history-emoji {
            font-size: 18px;
            margin-right: 9px;
            flex-shrink: 0;
        }

        .history-info {
            flex: 1;
        }

        .history-title {
            font-size: 13px;
            font-weight: 700;
            color: #1a1a1a;
        }

        .history-date {
            font-size: 11px;
            color: #666;
            margin-top: 3px;
            font-weight: 500;
        }

        .history-distance {
            font-size: 12px;
            color: #0088cc;
            font-weight: 700;
        }

        .history-actions {
            display: flex;
            gap: 6px;
        }

        .action-btn {
            padding: 5px 10px;
            background: #f0f4f8;
            border: 1.5px solid #ddd;
            color: #0088cc;
            border-radius: 4px;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
        }

        .action-btn:active {
            background: #0088cc;
            color: #ffffff;
            border-color: #0088cc;
            transform: scale(0.95);
            box-shadow: 0 2px 6px rgba(0, 136, 204, 0.2);
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #ddd;
            border-radius: 2px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #bbb;
        }
    </style>
</head>
<body>
    <!-- Home Screen -->
    <div id="home" class="screen active">
        <div class="header">
            <h1>üö∂ –ö—É–¥–∞–ü–æ–π–¥–µ–º</h1>
        </div>
        <div class="subtitle">–ö—É–¥–∞ –ø–æ–π—Ç–∏ –∑–∞ –º–∏–Ω—É—Ç—É?</div>

        <div class="section">
            <div class="section-title">–ì–æ—Ä–æ–¥</div>
            <select class="city-selector" id="citySelect">
                <option value="moscow">üèôÔ∏è –ú–æ—Å–∫–≤–∞</option>
                <option value="spb">üåâ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥</option>
                <option value="ekb">üèîÔ∏è –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥</option>
            </select>
        </div>

        <div class="section">
            <div class="section-title">–ö–æ–º–ø–∞–Ω–∏—è</div>
            <div class="button-group">
                <button class="btn-option active" data-option="solo" onclick="selectCompany('solo')">üë§ –°–æ–ª–æ</button>
                <button class="btn-option" data-option="pair" onclick="selectCompany('pair')">üíë –ü–∞—Ä–∞</button>
                <button class="btn-option" data-option="friends" onclick="selectCompany('friends')">üë• –î—Ä—É–∑—å—è</button>
            </div>
        </div>

        <div class="section">
            <div class="section-title">–í—Ä–µ–º—è</div>
            <div class="slider-container">
                <input type="range" class="slider" id="timeSlider" min="30" max="480" value="90" step="30" oninput="updateTimeDisplay()">
                <div class="slider-value" id="timeValue">1.5 —á–∞—Å–∞</div>
            </div>
        </div>

        <div class="section">
            <div class="section-title">–ë—é–¥–∂–µ—Ç</div>
            <div class="slider-container">
                <input type="range" class="slider" id="budgetSlider" min="0" max="5000" value="500" step="100" oninput="updateBudgetDisplay()">
                <div class="slider-value" id="budgetValue">500 ‚ÇΩ</div>
            </div>
        </div>

        <div class="section">
            <div class="section-title">–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</div>
            <div class="mood-grid">
                <button class="mood-btn" onclick="selectMood(this, 'calm')">üò¥<br>–°–ø–æ–∫–æ–π–Ω–æ</button>
                <button class="mood-btn" onclick="selectMood(this, 'active')">üö¥<br>–ê–∫—Ç–∏–≤–Ω–æ</button>
                <button class="mood-btn active" onclick="selectMood(this, 'romantic')">‚ù§Ô∏è<br>–†–æ–º–∞–Ω—Ç–∏—á</button>
            </div>
        </div>

        <button class="btn-primary" onclick="startPlanning()">–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç ‚ú®</button>
    </div>

    <!-- Loading Screen -->
    <div id="loading" class="screen">
        <div class="timer">00:47</div>
        <div class="progress-steps">
            <div class="step active">
                <div class="spinner"></div>
                <span>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –º–µ—Å—Ç–∞</span>
            </div>
            <div class="step">
                <div class="spinner"></div>
                <span>–ü–æ–¥–±–∏—Ä–∞–µ–º –º–∞—Ä—à—Ä—É—Ç</span>
            </div>
            <div class="step">
                <div class="spinner"></div>
                <span>–°—Ç—Ä–æ–∏–º –∫–æ–ª—å—Ü–æ</span>
            </div>
        </div>
        <button class="cancel-btn" onclick="showScreen('home')">–û—Ç–º–µ–Ω–∞</button>
    </div>

    <!-- Route Screen -->
    <div id="route" class="screen">
        <div class="route-header">
            <div class="route-title">‚ù§Ô∏è –†–æ–º–∞–Ω—Ç–∏–∫–∞</div>
            <div class="route-meta">1.5 —á–∞—Å–∞ ‚Ä¢ 4.2 –∫–º</div>
        </div>
        <div class="route-list">
            <div class="route-item" onclick="showScreen('detail')">
                <div class="route-item-name">
                    <div class="route-item-number">1</div>
                    –ü–∞—Ç—Ä–∏–∞—Ä—à–∏–µ –ø—Ä—É–¥—ã
                </div>
                <div class="route-item-time">18:00 ‚Ä¢ ‚≠ê 4.8 | –ö–∞—Ñ–µ</div>
                <div class="route-item-time">‚Üì 12 –º–∏–Ω</div>
            </div>
            <div class="route-item" onclick="showScreen('detail')">
                <div class="route-item-name">
                    <div class="route-item-number">2</div>
                    –°–∞–¥ &quot;–≠—Ä–º–∏—Ç–∞–∂&quot;
                </div>
                <div class="route-item-time">18:12 ‚Ä¢ ‚≠ê 4.7 | –õ–∞–≤–æ—á–∫–∏</div>
                <div class="route-item-time">‚Üì 14 –º–∏–Ω</div>
            </div>
            <div class="route-item" onclick="showScreen('detail')">
                <div class="route-item-name">
                    <div class="route-item-number">3</div>
                    –ö–∞–Ω–∞—Ç–Ω–∞—è –¥–æ—Ä–æ–≥–∞
                </div>
                <div class="route-item-time">18:26 ‚Ä¢ ‚≠ê 4.6 | –í–∏–¥</div>
                <div class="route-item-time">‚Üì 18 –º–∏–Ω</div>
            </div>
            <div class="route-item" onclick="showScreen('detail')">
                <div class="route-item-name">
                    <div class="route-item-number">4</div>
                    –ö–∞—Ñ–µ &quot;–ü–ª—é—Å&quot;
                </div>
                <div class="route-item-time">18:44 ‚Ä¢ ‚≠ê 4.9 | –î–µ—Å–µ—Ä—Ç—ã</div>
                <div class="route-item-time">‚Üì 10 –º–∏–Ω</div>
            </div>
            <div class="route-item" onclick="showScreen('detail')">
                <div class="route-item-name">
                    <div class="route-item-number">5</div>
                    –ö—Ä–µ–º–ª—å
                </div>
                <div class="route-item-time">18:54 ‚Ä¢ ‚≠ê 4.8 | –§–∏–Ω–∞–ª</div>
            </div>
        </div>
        <div class="route-footer">
            <button class="btn-small" onclick="showScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
            <button class="btn-small" onclick="showScreen('nav')">–ù–∞–≤–∏–≥–∞—Ü–∏—è ‚Üí</button>
            <button class="btn-small" onclick="shareRoute()">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
        </div>
    </div>

    <!-- Detail Screen -->
    <div id="detail" class="screen">
        <div class="detail-header">
            <div class="detail-title">–°–∞–¥ &quot;–≠—Ä–º–∏—Ç–∞–∂&quot;</div>
            <button class="btn-secondary" onclick="showScreen('route')">‚Üê –ù–∞–∑–∞–¥</button>
        </div>

        <div class="detail-card">
            <div class="detail-row">
                <span class="detail-label">‚è∞ –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã</span>
                <span class="detail-value">–î–æ 22:00</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">‚≠ê –†–µ–π—Ç–∏–Ω–≥</span>
                <span class="detail-value">4.7</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">üí∞ –¶–µ–Ω–∞</span>
                <span class="detail-value">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">‚úì –£–¥–æ–±—Å—Ç–≤–∞</span>
                <span class="detail-value">–¢—É–∞–ª–µ—Ç—ã</span>
            </div>
        </div>

        <div class="detail-card">
            <div class="detail-review">
                <div class="review-text">&quot;–¢–∏—Ö–æ, —É—é—Ç–Ω–æ, –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ –≤–¥–≤–æ—ë–º. –ú–Ω–æ–≥–æ —É–∫—Ä–æ–º–Ω—ã—Ö —É–≥–æ–ª–∫–æ–≤!&quot;</div>
                <div class="review-author">‚Äî –ê–ª–∏–Ω–∞, 26</div>
            </div>
        </div>

        <div class="detail-buttons">
            <button class="btn-small">üîÑ –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
            <button class="btn-small">‚òï –î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
    </div>

    <!-- Navigation Screen -->
    <div id="nav" class="screen">
        <div class="detail-header">
            <div class="detail-title">–ù–∞–≤–∏–≥–∞—Ü–∏—è</div>
            <button class="btn-secondary" onclick="showScreen('route')">‚Üê –ù–∞–∑–∞–¥</button>
        </div>

        <div class="nav-instruction">
            –ù–∞–ø—Ä–∞–≤–æ —á–µ—Ä–µ–∑ 50–º
        </div>

        <div class="nav-distance">
            <div class="detail-row">
                <span class="detail-label">‚Üí –î–æ –º–µ—Å—Ç–∞</span>
                <span class="detail-value">420–º ‚Ä¢ 6 –º–∏–Ω</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">üìç –¢–µ–∫—É—â–µ–µ</span>
                <span class="detail-value">–°–∞–¥ &quot;–≠—Ä–º–∏—Ç–∞–∂&quot;</span>
            </div>
        </div>

        <div class="nav-action-buttons">
            <button class="nav-btn" onclick="vibrate()">üîÑ –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
            <button class="nav-btn" onclick="vibrate()">‚òï –î–æ–±–∞–≤–∏—Ç—å</button>
            <button class="nav-btn" onclick="vibrate()">üåßÔ∏è –ê–ª—å—Ç–µ—Ä–Ω.</button>
        </div>
    </div>

    <!-- History Screen -->
    <div id="history" class="screen">
        <div class="detail-header">
            <div class="detail-title">–ú–æ–∏ –º–∞—Ä—à—Ä—É—Ç—ã</div>
            <div class="detail-label">3 / 10</div>
        </div>

        <div style="flex: 1; overflow-y: auto; padding-bottom: 10px;">
            <div class="history-item" onclick="showScreen('route')">
                <div style="display: flex; align-items: center;">
                    <div class="history-emoji">‚ù§Ô∏è</div>
                    <div class="history-info">
                        <div class="history-title">–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è</div>
                        <div class="history-date">14 –¥–µ–∫–∞–±—Ä—è</div>
                    </div>
                    <div class="history-distance">4.2–∫–º</div>
                </div>
                <div class="history-actions">
                    <button class="action-btn">–ü–æ–≤—Ç–æ—Ä</button>
                    <button class="action-btn">–ü–æ–¥–µ–ª–∏—Ç—å</button>
                </div>
            </div>

            <div class="history-item">
                <div style="display: flex; align-items: center;">
                    <div class="history-emoji">‚ö°</div>
                    <div class="history-info">
                        <div class="history-title">–≠–Ω–µ—Ä–≥–∏—á–Ω–∞—è</div>
                        <div class="history-date">12 –¥–µ–∫–∞–±—Ä—è</div>
                    </div>
                    <div class="history-distance">6.1–∫–º</div>
                </div>
                <div class="history-actions">
                    <button class="action-btn">–ü–æ–≤—Ç–æ—Ä</button>
                    <button class="action-btn">–ü–æ–¥–µ–ª–∏—Ç—å</button>
                </div>
            </div>

            <div class="history-item">
                <div style="display: flex; align-items: center;">
                    <div class="history-emoji">üé®</div>
                    <div class="history-info">
                        <div class="history-title">–ê—Ä—Ç-–º–∞—Ä—à—Ä—É—Ç</div>
                        <div class="history-date">10 –¥–µ–∫–∞–±—Ä—è</div>
                    </div>
                    <div class="history-distance">3.5–∫–º</div>
                </div>
                <div class="history-actions">
                    <button class="action-btn">–ü–æ–≤—Ç–æ—Ä</button>
                    <button class="action-btn">–ü–æ–¥–µ–ª–∏—Ç—å</button>
                </div>
            </div>

            <div style="text-align: center; padding: 16px; color: #888;">
                <div style="font-size: 22px; margin-bottom: 6px;">‚ûï</div>
                <div style="font-size: 13px;">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç</div>
            </div>
        </div>
    </div>

    <script>
        // Telegram Web App initialization
        let tg = window.Telegram.WebApp;
        tg.ready();
        
        let selectedCompany = 'solo';
        let selectedMood = 'romantic';

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            vibrate();
        }

        function selectCompany(value) {
            selectedCompany = value;
            document.querySelectorAll('[data-option]').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-option="${value}"]`).classList.add('active');
        }

        function selectMood(element, value) {
            selectedMood = value;
            document.querySelectorAll('.mood-btn').forEach(btn => btn.classList.remove('active'));
            element.classList.add('active');
        }

        function updateTimeDisplay() {
            const minutes = parseInt(document.getElementById('timeSlider').value);
            const hours = (minutes / 60).toFixed(1);
            document.getElementById('timeValue').textContent = 
                minutes < 60 ? minutes + ' –º–∏–Ω' : hours + ' —á–∞—Å–∞';
        }

        function updateBudgetDisplay() {
            const budget = parseInt(document.getElementById('budgetSlider').value);
            document.getElementById('budgetValue').textContent = budget + ' ‚ÇΩ';
        }

        function startPlanning() {
            const time = document.getElementById('timeSlider').value;
            const budget = document.getElementById('budgetSlider').value;
            const city = document.getElementById('citySelect').value;

            // Send data to Telegram bot
            const data = JSON.stringify({
                time,
                budget,
                city,
                company: selectedCompany,
                mood: selectedMood,
                timestamp: new Date().toISOString()
            });

            if (tg.sendData) {
                tg.sendData(data);
            }

            showScreen('loading');
            
            // Simulate loading
            setTimeout(() => {
                showScreen('route');
            }, 3000);
        }

        function shareRoute() {
            if (tg.sendData) {
                tg.sendData(JSON.stringify({
                    action: 'share_route',
                    timestamp: new Date().toISOString()
                }));
            }
            vibrate();
        }

        function vibrate() {
            if (navigator.vibrate) {
                navigator.vibrate(50);
            }
        }

        // Set up main button if available
        if (tg.MainButton) {
            tg.MainButton.text = '–û—Ç–ø—Ä–∞–≤–∏—Ç—å';
            tg.MainButton.show();
            tg.MainButton.onClick(() => {
                const data = {
                    action: 'main_button_clicked',
                    timestamp: new Date().toISOString()
                };
                if (tg.sendData) {
                    tg.sendData(JSON.stringify(data));
                }
            });
        }
    </script>
</body>
</html>
